# AI駆動型エンタープライズ・スケジュール管理システム 開発仕様書

**プロジェクト規模:** ユーザー数 10,000人未満  
**開発手法:** AI-Driven Development (AIDD) / フルスペック・ワンショットリリース  
**文書バージョン:** 1.0 (Architecture & Strategy)

## 1. システムアーキテクチャ戦略

1万人規模の同時アクセス（特に朝の始業時スパイク）に耐え、かつAIがコード生成しやすいモダンな構成を採用します。



### 1.1 技術スタック (Tech Stack)
AI（LLM）が学習データとして多く持っており、生成精度が最も高い技術選定を行います。

* **フロントエンド:** Next.js (React) + TypeScript + Tailwind CSS
    * *選定理由:* Vercel v0 等の生成AIツールとの親和性が最強であり、UIコンポーネントの自動生成が容易。
* **バックエンド:** Go (Golang) または Node.js (NestJS)
    * *選定理由:* Goは型安全で記述が画一的なため、AIによるコード生成の品質が非常に安定する。並行処理に強く1万人規模のアクセスを捌きやすい。
* **データベース:** PostgreSQL (Managed Service)
* **キャッシュ:** Redis (必須)
    * *理由:* スケジュール参照はRead多頻度のため、RedisでキャッシュしないとDBがパンクする。
* **インフラ:** AWS (ECS Fargate or App Runner) / Terraform
    * *理由:* IaC (Infrastructure as Code) もAIに書かせるため、ナレッジが多いTerraformを採用。

## 2. AI駆動開発プロセス (AI-Driven Development Strategy)

「フルスペックを効率よく」実現するため、以下の工程でAIをフル活用します。

### 2.1 要件定義・設計フェーズ (Human + AI)
* **DB設計:** 自然言語で要件を伝え、`dbdiagram.io` 形式のER図コードをAIに出力させる。
* **API定義:** Swagger (OpenAPI) 定義ファイルをAIに一括生成させ、これを「正」としてバックエンドとフロントエンドを並行開発する。

### 2.2 実装フェーズ (AI Agent)
* **ボイラープレート生成:**
    * 認証、ロギング、エラーハンドリング等の「面白くないが重要な基盤コード」は、Cursor (Claude 3.5 Sonnet) 等で一撃生成。
* **UI生成:**
    * v0.dev または Figma-to-Code AI を使用し、手書きのラフスケッチからReactコンポーネントを生成。
* **ロジック生成:**
    * 「空き時間検索アルゴリズム」などの複雑なロジックは、テストケースを先にAIに書かせ（TDD）、そのテストを通るコードをAIに書かせる。

### 2.3 テスト・品質保証 (AI Automated)
* **テストデータ生成:** 1万人分のダミーユーザーと、数百万件のスケジュールデータをAIに生成させ、負荷テストを実施。
* **自動E2Eテスト:** PlaywrightのテストスクリプトをAIに生成させ、全画面の操作テストを自動化。

## 3. 機能要件詳細 (Full Spec Definition)

1万人規模の企業利用に耐えうる「フルスペック」の内訳です。

### 3.1 エンタープライズ・コア機能
1.  **高度な繰り返し予定:**
    * 「毎月第3営業日」「四半期ごとの最終金曜日」など、複雑なビジネスルールに対応。
2.  **代理操作機能 (秘書機能):**
    * 役員等のスケジュールを秘書が代理で登録・承認・変更できる権限委譲機能。
3.  **施設・備品管理の最適化:**
    * 会議室だけでなく、プロジェクター、社用車、Wi-Fiルーター等の備品管理。
    * 連続予約制限（特定の部屋の占有防止ロジック）。

### 3.2 AIアシスタント機能 (本システム独自の強み)
AIを活用して実装するだけでなく、**システム自体にAIを組み込みます**。
* **スマート日程調整:**
    * 「A部長とB課長と開発チームで来週1時間」と入力すると、全員の空き時間と適切なサイズの会議室を自動提案。
* **会議準備サジェスト:**
    * 予定のタイトル（例：「予算会議」）から、必要な資料テンプレートや過去の議事録をレコメンド。

## 4. 非機能要件 (10,000 Users Scale)

### 4.1 パフォーマンス目標
* **スループット:** 秒間 500 リクエスト (RPS) に耐えること。
* **データ整合性:** ダブルブッキングはデータベースのトランザクションレベルで厳密に排他制御すること。

### 4.2 セキュリティ・ガバナンス
* **SSO (Single Sign-On):** SAML 2.0 / OIDC 対応 (Azure AD, Okta連携)。
* **RBAC (Role Based Access Control):** 部署単位、役職単位でのきめ細やかな閲覧・編集権限設定。


## 5. データベース設計案 (Draft Entity Relationship)

AIに生成指示を出すためのベースとなる設計案です。

* `Users` (10,000 records)
* `Events` (数百万 records - パーティショニングが必要)
* `Resources` (数百 records)
* `Event_Participants` (多対多解消用)
* `Audit_Logs` (監査ログ - 膨大になるためS3等へアーカイブ)

